# Terra AIOps Platform

Terra AIOps Platform æ˜¯ä¸€ä¸ªæ™ºèƒ½ç½‘ç»œè¿ç»´ç®¡ç†å¹³å°ï¼Œé›†æˆäº† SDN æ§åˆ¶å™¨ç®¡ç†ã€çŸ¥è¯†å›¾è°±ã€AI æ™ºèƒ½åˆ†æç­‰åŠŸèƒ½ï¼Œä¸ºç½‘ç»œè¿ç»´æä¾›å…¨æ–¹ä½çš„å¯è§†åŒ–å’Œè‡ªåŠ¨åŒ–æ”¯æŒã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

Terra AIOps Platform é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›ï¼š

- **ç½‘ç»œè®¾å¤‡ç®¡ç†**ï¼šæ”¯æŒå¤šç§ SDN æ§åˆ¶å™¨ï¼ˆOpenDaylightã€ONOSã€Terra ç­‰ï¼‰çš„ç»Ÿä¸€ç®¡ç†
- **æ‹“æ‰‘å¯è§†åŒ–**ï¼šå®æ—¶ç½‘ç»œæ‹“æ‰‘å±•ç¤ºå’Œäº¤äº’å¼çŸ¥è¯†å›¾è°±
- **æ™ºèƒ½è¿ç»´**ï¼šåŸºäº AI çš„æ ¹å› åˆ†æã€æ™ºèƒ½å‘Šè­¦å’Œæ•…éšœè¯Šæ–­
- **æ‰©å±•é›†æˆ**ï¼šæ”¯æŒ MCP (Model Context Protocol) æœåŠ¡å™¨é›†æˆï¼Œå¯æ‰©å±•å·¥å…·èƒ½åŠ›
- **æ•°æ®æ´å¯Ÿ**ï¼šç›‘æ§æ•°æ®æ”¶é›†ã€æ—¥å¿—åˆ†æå’Œæ‹“æ‰‘å¿«ç…§ç®¡ç†

## ğŸ—ï¸ æ¶æ„ç»„æˆ

é¡¹ç›®ç”±ä¸¤ä¸ªä¸»è¦æ¨¡å—ç»„æˆï¼š

### ğŸ“¦ [Backend - åç«¯æœåŠ¡](./backend/README.md)

åŸºäº **FastAPI + Python 3.12** æ„å»ºçš„é«˜æ€§èƒ½åç«¯æœåŠ¡

**æ ¸å¿ƒæŠ€æœ¯æ ˆ**ï¼š
- FastAPI (Web æ¡†æ¶)
- PostgreSQL (å…³ç³»æ•°æ®åº“)
- Neo4j (å›¾æ•°æ®åº“)
- LangChain + LangGraph (AI å·¥ä½œæµ)
- Alembic (æ•°æ®åº“è¿ç§»)

**ä¸»è¦åŠŸèƒ½**ï¼š
- RESTful API æœåŠ¡
- SDN æ§åˆ¶å™¨æ•°æ®æ”¶é›†å’Œç®¡ç†
- çŸ¥è¯†å›¾è°±æ„å»ºå’ŒæŸ¥è¯¢
- AI Agent æ™ºèƒ½åˆ†æ
- MCP æœåŠ¡å™¨é›†æˆ

ğŸ“– **è¯¦ç»†æ–‡æ¡£**: [backend/README.md](./backend/README.md)

---

### ğŸ¨ [Frontend - å‰ç«¯ç•Œé¢](./aiops-platform-ui/README.md)

åŸºäº **Vue 3 + TypeScript + Element Plus** æ„å»ºçš„ç°ä»£åŒ–å‰ç«¯åº”ç”¨

**æ ¸å¿ƒæŠ€æœ¯æ ˆ**ï¼š
- Vue 3 (Composition API)
- TypeScript
- Element Plus (UI ç»„ä»¶åº“)
- Pinia (çŠ¶æ€ç®¡ç†)
- D3.js (æ•°æ®å¯è§†åŒ–)
- Vite (æ„å»ºå·¥å…·)

**ä¸»è¦åŠŸèƒ½**ï¼š
- SDN æ§åˆ¶å™¨ç®¡ç†ç•Œé¢
- ç½‘ç»œæ‹“æ‰‘å¯è§†åŒ–
- çŸ¥è¯†å›¾è°±äº¤äº’å±•ç¤º
- MCP æœåŠ¡å™¨ç®¡ç†
- ç›‘æ§æ•°æ®å’Œæ—¥å¿—æŸ¥çœ‹

ğŸ“– **è¯¦ç»†æ–‡æ¡£**: [aiops-platform-ui/README.md](./aiops-platform-ui/README.md)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

| ç»„ä»¶ | ç‰ˆæœ¬è¦æ±‚ |
|------|---------|
| Python | >= 3.12 |
| Node.js | >= 18 |
| PostgreSQL | >= 12 |
| Neo4j | >= 5.0 |
| Redis | >= 6.0 (å¯é€‰) |

### ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ

#### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend

# å®‰è£…ä¾èµ–
uv sync
# æˆ–ä½¿ç”¨: pip install -e .

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½® LLM API Key

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim etc/config.yaml
# é…ç½® PostgreSQL å’Œ Neo4j è¿æ¥ä¿¡æ¯

# åˆå§‹åŒ–æ•°æ®åº“
alembic upgrade head

# å¯åŠ¨æœåŠ¡
python main.py
```

åç«¯æœåŠ¡å°†åœ¨ **http://localhost:7082** å¯åŠ¨

#### 2. å¯åŠ¨å‰ç«¯åº”ç”¨

```bash
cd aiops-platform-ui

# å®‰è£…ä¾èµ–
npm install

# é…ç½®åç«¯ API åœ°å€ï¼ˆå¯é€‰ï¼Œé»˜è®¤å·²é…ç½®ï¼‰
# ç¼–è¾‘ .env.development æ–‡ä»¶

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

å‰ç«¯åº”ç”¨å°†åœ¨ **http://localhost:3000** å¯åŠ¨

### è®¿é—®åº”ç”¨

- **å‰ç«¯ç•Œé¢**: http://localhost:3000
- **åç«¯ API æ–‡æ¡£**: http://localhost:7082/api/v1/docs
- **API æ ¹è·¯å¾„**: http://localhost:7082/api/v1

## ğŸ“ é¡¹ç›®ç»“æ„

```
terra-aiops/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ apps/                   # åº”ç”¨æ ¸å¿ƒä»£ç 
â”‚   â”‚   â”œâ”€â”€ cache/             # ç¼“å­˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ graph_db/          # Neo4j å›¾æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ llm/               # LLM é›†æˆ
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ rca/               # æ ¹å› åˆ†æå¼•æ“
â”‚   â”‚   â”œâ”€â”€ router/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ service/           # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ workflow/          # AI å·¥ä½œæµ
â”‚   â”œâ”€â”€ alembic/               # æ•°æ®åº“è¿ç§»
â”‚   â”œâ”€â”€ etc/                   # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ test/                  # æµ‹è¯•ç”¨ä¾‹
â”‚   â””â”€â”€ main.py                # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ aiops-platform-ui/         # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ stores/            # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ views/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.ts            # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ .env.development       # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ vite.config.ts         # Vite é…ç½®
â”‚   â””â”€â”€ package.json           # ä¾èµ–é…ç½®
â”‚
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md                   # æœ¬æ–‡æ¡£
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. SDN æ§åˆ¶å™¨ç®¡ç†

- æ”¯æŒå¤šç§ SDN æ§åˆ¶å™¨ç±»å‹ï¼ˆOpenDaylightã€ONOSã€Terraï¼‰
- æ§åˆ¶å™¨é…ç½®ã€çŠ¶æ€ç›‘æ§å’Œè¿æ¥æµ‹è¯•
- ç½‘ç»œæ‹“æ‰‘åŒæ­¥å’Œå¿«ç…§ç®¡ç†
- å®æ—¶ç›‘æ§æ•°æ®å’Œæ—¥å¿—æ”¶é›†

### 2. çŸ¥è¯†å›¾è°±

- åŸºäº Neo4j çš„ç½‘ç»œæ‹“æ‰‘çŸ¥è¯†å›¾è°±
- äº¤äº’å¼å›¾è°±å¯è§†åŒ–ï¼ˆåŸºäº D3.jsï¼‰
- ç½‘ç»œè®¾å¤‡å’Œé“¾è·¯å…³ç³»å»ºæ¨¡
- Cypher æŸ¥è¯¢æ”¯æŒ

### 3. MCP æœåŠ¡å™¨é›†æˆ

- Model Context Protocol æ ‡å‡†æ”¯æŒ
- åŠ¨æ€å·¥å…·å‘ç°å’Œè°ƒç”¨
- å¤šæœåŠ¡å™¨ç®¡ç†
- å·¥å…·é“¾ç¼–æ’

### 4. æ™ºèƒ½è¿ç»´åˆ†æ

- AI Agent æ ¹å› åˆ†æ
- è§„åˆ™å¼•æ“ï¼ˆå…³é”®è¯ã€æ­£åˆ™ã€FSMï¼‰
- å‘Šè­¦æ”¶é›†å’Œå…³è”åˆ†æ
- æ•…éšœé¢„æµ‹å’Œè¯Šæ–­

## ğŸ”Œ API æ¥å£

åç«¯æä¾›ä»¥ä¸‹ RESTful API æ¨¡å—ï¼š

| æ¨¡å— | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| SDN æ§åˆ¶å™¨ | `/api/v1/sdn` | æ§åˆ¶å™¨ç®¡ç†ã€æ‹“æ‰‘åŒæ­¥ã€ç›‘æ§æ•°æ® |
| MCP æœåŠ¡å™¨ | `/api/v1/mcp` | MCP é…ç½®ã€å·¥å…·æŸ¥è¯¢å’Œè°ƒç”¨ |
| å›¾æ•°æ®åº“ | `/api/v1/graph/database` | Neo4j å›¾è°±æŸ¥è¯¢ |
| å›¾è°±ä½ç½® | `/api/v1/graph/position` | èŠ‚ç‚¹ä½ç½®ä¿å­˜ |
| é€šç”¨æ¥å£ | `/api/v1/common` | å¥åº·æ£€æŸ¥ã€ç³»ç»Ÿä¿¡æ¯ |

å®Œæ•´ API æ–‡æ¡£è¯·è®¿é—®ï¼šhttp://localhost:7082/api/v1/docs

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- **[åç«¯è¯¦ç»†æ–‡æ¡£](./backend/README.md)** - åŒ…å«å®Œæ•´çš„åç«¯å¼€å‘ã€é…ç½®å’Œéƒ¨ç½²æŒ‡å—
- **[å‰ç«¯è¯¦ç»†æ–‡æ¡£](./aiops-platform-ui/README.md)** - åŒ…å«å®Œæ•´çš„å‰ç«¯å¼€å‘ã€ç»„ä»¶å’Œéƒ¨ç½²æŒ‡å—

## ğŸ³ Docker éƒ¨ç½²

### ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰

```yaml
# docker-compose.yml ç¤ºä¾‹
version: '3.8'

services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_DB: terra-aiops
      POSTGRES_USER: root
      POSTGRES_PASSWORD: yourpassword
    ports:
      - "5432:5432"

  neo4j:
    image: neo4j:5.0
    environment:
      NEO4J_AUTH: neo4j/yourpassword
    ports:
      - "7474:7474"
      - "7687:7687"

  backend:
    build: ./backend
    ports:
      - "7082:7082"
    depends_on:
      - postgres
      - neo4j
    environment:
      - LLM_API_KEY=your_key

  frontend:
    build: ./aiops-platform-ui
    ports:
      - "80:80"
    depends_on:
      - backend
```

å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼š

```bash
docker-compose up -d
```

## ğŸ§ª æµ‹è¯•

### åç«¯æµ‹è¯•

```bash
cd backend
pytest                    # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest test/unit/         # å•å…ƒæµ‹è¯•
pytest test/integration/  # é›†æˆæµ‹è¯•
```

### å‰ç«¯æµ‹è¯•

```bash
cd aiops-platform-ui
npm run type-check        # TypeScript ç±»å‹æ£€æŸ¥
```

## ğŸ› ï¸ å¼€å‘å·¥å…·æ¨è

- **IDE**: PyCharm (åç«¯) / VSCode (å‰ç«¯)
- **API æµ‹è¯•**: Postman / Insomnia
- **æ•°æ®åº“**: DBeaver (PostgreSQL) / Neo4j Desktop
- **ç‰ˆæœ¬æ§åˆ¶**: Git

## ğŸ“‹ å¼€å‘è§„èŒƒ

- **åç«¯**: éµå¾ª PEP 8 è§„èŒƒï¼Œä½¿ç”¨ Type Hints
- **å‰ç«¯**: ä½¿ç”¨ TypeScriptï¼Œéµå¾ª Vue 3 Composition API æœ€ä½³å®è·µ
- **æäº¤**: ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯ï¼ˆConventional Commitsï¼‰
- **åˆ†æ”¯**: åŠŸèƒ½åˆ†æ”¯å¼€å‘ï¼Œä¸»åˆ†æ”¯ä¿æŠ¤

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

[æ·»åŠ è®¸å¯è¯ä¿¡æ¯]

## ğŸ“® è”ç³»æ–¹å¼

- **é¡¹ç›®è´Ÿè´£äºº**: [æ·»åŠ è”ç³»æ–¹å¼]
- **é—®é¢˜åé¦ˆ**: [GitHub Issues é“¾æ¥]
- **é‚®ç®±**: [æ·»åŠ é‚®ç®±]

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

---

**å¿«é€Ÿé“¾æ¥**:
- [åç«¯å¼€å‘æ–‡æ¡£](./backend/README.md)
- [å‰ç«¯å¼€å‘æ–‡æ¡£](./aiops-platform-ui/README.md)
- [API åœ¨çº¿æ–‡æ¡£](http://localhost:7082/api/v1/docs)
